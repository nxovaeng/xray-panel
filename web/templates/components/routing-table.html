{{define "components/routing-table.html"}}
<table class="data-table">
    <thead>
        <tr>
            <th>è§„åˆ™åç§°</th>
            <th>è§„åˆ™ç±»å‹</th>
            <th>åŒ¹é…å†…å®¹</th>
            <th>ç›®æ ‡å‡ºç«™</th>
            <th>ä¼˜å…ˆçº§</th>
            <th>æ“ä½œ</th>
        </tr>
    </thead>
    <tbody>
        {{range .Rules}}
        <tr id="rule-{{.ID}}">
            <td>
                <code style="color: var(--accent); border-color: rgba(99, 102, 241, 0.2);">{{.Name}}</code>
                {{if .Remark}}
                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.25rem;">{{.Remark}}</div>
                {{end}}
            </td>
            <td>
                {{if eq .Type "inbound"}}
                <span class="badge" style="background: rgba(59, 130, 246, 0.2); color: rgb(96, 165, 250);">ğŸ“¥ å…¥ç«™</span>
                {{else if eq .Type "domain"}}
                <span class="badge" style="background: rgba(168, 85, 247, 0.2); color: rgb(192, 132, 252);">ğŸŒ åŸŸå</span>
                {{else if eq .Type "ip"}}
                <span class="badge" style="background: rgba(34, 197, 94, 0.2); color: rgb(74, 222, 128);">ğŸ”¢ IP</span>
                {{else if eq .Type "geosite"}}
                <span class="badge" style="background: rgba(251, 146, 60, 0.2); color: rgb(251, 146, 60);">ğŸ—ºï¸ GeoSite</span>
                {{else if eq .Type "geoip"}}
                <span class="badge" style="background: rgba(236, 72, 153, 0.2); color: rgb(244, 114, 182);">ğŸŒ GeoIP</span>
                {{else if eq .Type "protocol"}}
                <span class="badge" style="background: rgba(14, 165, 233, 0.2); color: rgb(56, 189, 248);">âš¡ åè®®</span>
                {{end}}
            </td>
            <td style="font-size: 0.85rem; max-width: 350px;">
                {{if eq .Type "inbound"}}
                    {{if .InboundTag}}
                    <span class="badge badge-info">{{.InboundTag}}</span>
                    {{else}}
                    <span style="color: var(--text-secondary);">æœªè®¾ç½®</span>
                    {{end}}
                {{else if eq .Type "domain"}}
                    {{if .Domains}}
                    <div style="color: var(--text-secondary); word-break: break-all;">{{.Domains}}</div>
                    {{else}}
                    <span style="color: var(--text-secondary);">æœªè®¾ç½®</span>
                    {{end}}
                {{else if eq .Type "ip"}}
                    {{if .IPs}}
                    <div style="color: var(--text-secondary); word-break: break-all;">{{.IPs}}</div>
                    {{else}}
                    <span style="color: var(--text-secondary);">æœªè®¾ç½®</span>
                    {{end}}
                {{else if eq .Type "geosite"}}
                    {{if .GeoSiteTags}}
                    <div style="color: var(--text-secondary);">{{.GeoSiteTags}}</div>
                    {{else}}
                    <span style="color: var(--text-secondary);">æœªè®¾ç½®</span>
                    {{end}}
                {{else if eq .Type "geoip"}}
                    {{if .GeoIPCodes}}
                    <div style="color: var(--text-secondary);">{{.GeoIPCodes}}</div>
                    {{else}}
                    <span style="color: var(--text-secondary);">æœªè®¾ç½®</span>
                    {{end}}
                {{else if eq .Type "protocol"}}
                    {{if .Protocols}}
                    <div style="color: var(--text-secondary);">{{.Protocols}}</div>
                    {{else}}
                    <span style="color: var(--text-secondary);">æœªè®¾ç½®</span>
                    {{end}}
                {{end}}
            </td>
            <td>
                <span class="badge {{if eq .OutboundTag "direct"}}badge-success{{else if eq .OutboundTag "block"}}badge-danger{{else}}badge-info{{end}}">
                    {{.OutboundTag}}
                </span>
            </td>
            <td style="text-align: center;">
                <span style="color: var(--text-secondary); font-size: 0.9rem;">{{.Priority}}</span>
            </td>
            <td>
                <div style="display: flex; gap: 0.5rem;">
                    <button hx-get="/routing/{{.ID}}/edit" hx-target="#modal-body" onclick="openModal('ç¼–è¾‘è·¯ç”±è§„åˆ™')"
                        class="btn btn-sm btn-outline" title="ç¼–è¾‘">
                        <i data-lucide="edit-2" style="width: 16px; height: 16px;"></i>
                    </button>
                    <button hx-delete="/api/routing/{{.ID}}" hx-target="#rule-{{.ID}}" hx-swap="outerHTML swap:0.5s"
                        hx-confirm="ç¡®å®šåˆ é™¤æ­¤è·¯ç”±è§„åˆ™ï¼Ÿ" class="btn btn-sm btn-outline"
                        style="color: var(--danger); border-color: rgba(239, 68, 68, 0.3);" title="åˆ é™¤">
                        <i data-lucide="trash-2" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
            </td>
        </tr>
        {{else}}
        <tr>
            <td colspan="6" class="text-center" style="padding: 3rem; color: var(--text-secondary);">
                <i data-lucide="git-branch" style="width: 48px; height: 48px; margin-bottom: 1rem; opacity: 0.5;"></i>
                <div>æš‚æ— è·¯ç”±è§„åˆ™</div>
                <div style="font-size: 0.85rem; margin-top: 0.5rem;">ç‚¹å‡»ä¸Šæ–¹"æ·»åŠ è·¯ç”±è§„åˆ™"æŒ‰é’®åˆ›å»ºç¬¬ä¸€æ¡è§„åˆ™</div>
            </td>
        </tr>
        {{end}}
    </tbody>
</table>
<script>lucide.createIcons();</script>
{{end}}
# CLI å‘½ä»¤è¯´æ˜

Xray Panel æä¾›äº†å¤šä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç®¡ç†å’Œç»´æŠ¤ç³»ç»Ÿã€‚

## å‘½ä»¤æ¦‚è§ˆ

```bash
panel [command] [flags]
```

å¯ç”¨å‘½ä»¤ï¼š

- `server`: å¯åŠ¨é¢æ¿æœåŠ¡å™¨ (é»˜è®¤å‘½ä»¤)
- `version`: æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
- `admin`: æ˜¾ç¤ºç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
- `reset-password`: é‡ç½®ç®¡ç†å‘˜å¯†ç 
- `nginx`: Nginx é…ç½®ç®¡ç†

---

## è¯¦ç»†è¯´æ˜

### 1. å¯åŠ¨æœåŠ¡å™¨ (server)

å¯åŠ¨ Web é¢æ¿æœåŠ¡ã€‚

```bash
# é»˜è®¤å¯åŠ¨
./panel server

# ç®€å†™ (é»˜è®¤å°±æ˜¯ server)
./panel

# æŒ‡å®šé…ç½®æ–‡ä»¶
./panel server -config /path/to/config.yaml
```

**å‚æ•°**:

- `-config`: æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ (å¯é€‰)

---

### 2. æ˜¾ç¤ºç‰ˆæœ¬ (version)

æ˜¾ç¤ºå½“å‰é¢æ¿çš„ç‰ˆæœ¬å’Œæ„å»ºæ—¶é—´ã€‚

```bash
./panel version
```

**è¾“å‡ºç¤ºä¾‹**:

```text
xray-panel version 0.1.0
Build time: 2026-01-29 22:52:45
```

---

### 3. Nginx ç®¡ç† (nginx)

ç®¡ç† Nginx åå‘ä»£ç†é…ç½®ã€‚

```bash
# ç”Ÿæˆé¢æ¿çš„ Nginx é…ç½®
./panel nginx panel -d example.com -cert /path/to/cert.pem -key /path/to/key.pem

# åŒæ­¥ç”Ÿæˆæ‰€æœ‰å…¥ç«™çš„ Nginx é…ç½®
./panel nginx sync

# é‡è½½ Nginx æœåŠ¡
./panel nginx reload
```

**å­å‘½ä»¤**:

- `panel`: ç”Ÿæˆé¢æ¿è‡ªèº«çš„åå‘ä»£ç†é…ç½®
  - `-d, -domain`: é¢æ¿åŸŸå (å¿…éœ€)
  - `-cert`: SSL è¯ä¹¦è·¯å¾„ (å¿…éœ€)
  - `-key`: SSL å¯†é’¥è·¯å¾„ (å¿…éœ€)
- `sync`: æ ¹æ®æ•°æ®åº“ä¸­çš„å…¥ç«™èŠ‚ç‚¹ï¼ŒåŒæ­¥ç”Ÿæˆæ‰€æœ‰ Nginx é…ç½®æ–‡ä»¶
- `reload`: é‡è½½ Nginx æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ

---

### 4. ç®¡ç†å‘˜ä¿¡æ¯ (admin)

æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­çš„ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯ã€‚

```bash
./panel admin
```

**è¾“å‡ºç¤ºä¾‹**:

```text
========================================
ğŸ“‹ ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
========================================

è´¦æˆ· #1:
  ç”¨æˆ·å:   admin_4ai8z1
  åˆ›å»ºæ—¶é—´: 2026-01-29 22:52:45
```

---

### 5. é‡ç½®å¯†ç  (reset-password)

é‡ç½®æŒ‡å®šç®¡ç†å‘˜çš„å¯†ç ã€‚

```bash
./panel reset-password -u <ç”¨æˆ·å> -p <æ–°å¯†ç >
```

**å‚æ•°**:

- `-u, -username`: ç”¨æˆ·å (å¿…éœ€)
- `-p, -password`: æ–°å¯†ç  (å¿…éœ€)

**ç¤ºä¾‹**:

```bash
./panel reset-password -u admin_4ai8z1 -p NewPassword123!
```

---

## å¸¸è§é—®é¢˜

### Q: å¿˜è®°ç®¡ç†å‘˜å¯†ç æ€ä¹ˆåŠï¼Ÿ

1. ä½¿ç”¨ `./panel admin` æŸ¥çœ‹ç”¨æˆ·åã€‚
2. ä½¿ç”¨ `./panel reset-password ...` é‡ç½®å¯†ç ã€‚

### Q: å¦‚ä½•æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Ÿ

ä½¿ç”¨ `-config` å‚æ•°ï¼Œä¾‹å¦‚ï¼š

```bash
./panel server -config conf/config.prod.yaml
```

æ³¨æ„ï¼šå¦‚æœçœç•¥ `server` å­å‘½ä»¤ï¼Œç›´æ¥ä½¿ç”¨ `./panel -config ...` å¯èƒ½ä¼šæŠ¥é”™ï¼Œå»ºè®®æ˜¾å¼åŠ ä¸Š `server`ã€‚

### Q: Nginx é…ç½®åœ¨å“ªé‡Œï¼Ÿ

é»˜è®¤æƒ…å†µä¸‹ï¼š

- é¢æ¿é…ç½®ï¼š`/etc/nginx/conf.d/panel.conf` (æˆ–å…¶ä»–åç§°)
- æµé…ç½®ï¼š`/etc/nginx/stream.d/` ç›®å½•
å…·ä½“è·¯å¾„å–å†³äºé…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®ã€‚

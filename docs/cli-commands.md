# CLI å‘½ä»¤è¯´æ˜

Xray Panel æä¾›äº†å¤šä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç®¡ç†å’Œç»´æŠ¤ç³»ç»Ÿã€‚

## å‘½ä»¤åˆ—è¡¨

### 1. æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

```bash
./panel -version
```

**è¾“å‡ºç¤ºä¾‹**:
```
xray-panel version 0.1.0 (built: 2026-01-29)
```

---

### 2. æ˜¾ç¤ºç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯

```bash
./panel -show-admin
```

**è¾“å‡ºç¤ºä¾‹**:
```
========================================
ğŸ“‹ ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
========================================

è´¦æˆ· #1:
  ç”¨æˆ·å:   admin_4ai8z1
  åˆ›å»ºæ—¶é—´: 2026-01-29 22:52:45
  æ›´æ–°æ—¶é—´: 2026-01-29 22:52:45

========================================
ğŸ’¡ æç¤º:
  - å¦‚éœ€é‡ç½®å¯†ç ï¼Œä½¿ç”¨: ./panel -reset-password -username=<ç”¨æˆ·å> -password=<æ–°å¯†ç >
  - å¯†ç å·²åŠ å¯†å­˜å‚¨ï¼Œæ— æ³•ç›´æ¥æŸ¥çœ‹
========================================
```

**ç”¨é€”**:
- æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­çš„ç®¡ç†å‘˜è´¦æˆ·
- è·å–ç”¨æˆ·åï¼ˆç”¨äºå¯†ç é‡ç½®ï¼‰
- æŸ¥çœ‹è´¦æˆ·åˆ›å»ºå’Œæ›´æ–°æ—¶é—´

**æ³¨æ„**:
- å¯†ç å·²åŠ å¯†å­˜å‚¨ï¼Œæ— æ³•ç›´æ¥æŸ¥çœ‹
- å¦‚æœå¿˜è®°å¯†ç ï¼Œè¯·ä½¿ç”¨é‡ç½®å¯†ç å‘½ä»¤

---

### 3. é‡ç½®ç®¡ç†å‘˜å¯†ç 

```bash
./panel -reset-password -username=<ç”¨æˆ·å> -password=<æ–°å¯†ç >
```

**ç¤ºä¾‹**:
```bash
# Linux/macOS
./panel -reset-password -username=admin_4ai8z1 -password=NewPassword123!

# Windows
.\panel.exe -reset-password -username=admin_4ai8z1 -password=NewPassword123!
```

**è¾“å‡ºç¤ºä¾‹**:
```
âœ… Password reset successful for user: admin_4ai8z1
```

**å‚æ•°è¯´æ˜**:
- `-username`: ç®¡ç†å‘˜ç”¨æˆ·åï¼ˆå¿…éœ€ï¼‰
- `-password`: æ–°å¯†ç ï¼ˆå¿…éœ€ï¼‰

**å¯†ç è¦æ±‚**:
- é•¿åº¦è‡³å°‘ 8 ä¸ªå­—ç¬¦
- å»ºè®®åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
- ä¸è¦ä½¿ç”¨å¸¸è§å¯†ç 

**æ³¨æ„äº‹é¡¹**:
1. é‡ç½®å¯†ç åç«‹å³ç”Ÿæ•ˆ
2. æ—§å¯†ç å°†å¤±æ•ˆ
3. æ‰€æœ‰å·²ç™»å½•çš„ä¼šè¯å°†ä¿æŒæœ‰æ•ˆï¼ˆç›´åˆ° token è¿‡æœŸï¼‰
4. å»ºè®®é‡ç½®åç«‹å³ç™»å½•æµ‹è¯•

---

### 4. æŒ‡å®šé…ç½®æ–‡ä»¶

```bash
./panel -config /path/to/config.yaml
```

**ç¤ºä¾‹**:
```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
./panel -config /etc/xray-panel/custom.yaml

# ä½¿ç”¨ç›¸å¯¹è·¯å¾„
./panel -config conf/config.linux.yaml
```

**é»˜è®¤è¡Œä¸º**:
å¦‚æœä¸æŒ‡å®š `-config` å‚æ•°ï¼Œç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿå¹¶åŠ è½½å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼š
- Windows: `conf/config.windows.yaml`
- Linux: `conf/config.linux.yaml`
- macOS: `conf/config.darwin.yaml`

---

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: å¿˜è®°ç®¡ç†å‘˜å¯†ç 

**æ­¥éª¤**:
1. æŸ¥çœ‹ç®¡ç†å‘˜ç”¨æˆ·å
   ```bash
   ./panel -show-admin
   ```

2. é‡ç½®å¯†ç 
   ```bash
   ./panel -reset-password -username=admin_xxx -password=NewPassword123!
   ```

3. ä½¿ç”¨æ–°å¯†ç ç™»å½•

---

### åœºæ™¯ 2: é¦–æ¬¡éƒ¨ç½²

**æ­¥éª¤**:
1. å¯åŠ¨æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ï¼‰
   ```bash
   ./panel
   ```

2. æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„å‡­æ®ï¼ˆåœ¨å¯åŠ¨æ—¥å¿—ä¸­ï¼‰
   ```
   ========================================
   ğŸ” åˆå§‹ç®¡ç†å‘˜è´¦æˆ·å·²åˆ›å»º
   ========================================
   ç”¨æˆ·å: admin_k7m2p9
   å¯†ç :   Xy9mK2pL4nQ8rT6v
   ========================================
   ```

3. å¦‚æœé”™è¿‡äº†æ—¥å¿—ï¼Œä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ç”¨æˆ·å
   ```bash
   ./panel -show-admin
   ```

4. é‡ç½®ä¸ºè‡ªå·±çš„å¯†ç 
   ```bash
   ./panel -reset-password -username=admin_k7m2p9 -password=MyPassword123!
   ```

---

### åœºæ™¯ 3: å¤šç¯å¢ƒéƒ¨ç½²

**å¼€å‘ç¯å¢ƒ**:
```bash
# ä½¿ç”¨ Windows é…ç½®
.\panel.exe -config conf/config.windows.yaml
```

**æµ‹è¯•ç¯å¢ƒ**:
```bash
# ä½¿ç”¨æµ‹è¯•é…ç½®
./panel -config conf/config.test.yaml
```

**ç”Ÿäº§ç¯å¢ƒ**:
```bash
# ä½¿ç”¨ç”Ÿäº§é…ç½®
./panel -config /etc/xray-panel/config.yaml
```

---

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æŸ¥çœ‹é¦–æ¬¡å¯åŠ¨æ—¶ç”Ÿæˆçš„å¯†ç ï¼Ÿ

A: æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š

1. **æŸ¥çœ‹å¯åŠ¨æ—¥å¿—**ï¼ˆæ¨èï¼‰
   ```bash
   # systemd æœåŠ¡
   journalctl -u xray-panel | grep "åˆå§‹ç®¡ç†å‘˜"
   
   # æˆ–æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
   cat /var/log/xray-panel.log | grep "åˆå§‹ç®¡ç†å‘˜"
   ```

2. **é‡ç½®å¯†ç **
   ```bash
   # å…ˆæŸ¥çœ‹ç”¨æˆ·å
   ./panel -show-admin
   
   # ç„¶åé‡ç½®å¯†ç 
   ./panel -reset-password -username=admin_xxx -password=NewPassword123!
   ```

---

### Q: é‡ç½®å¯†ç åéœ€è¦é‡å¯æœåŠ¡å—ï¼Ÿ

A: ä¸éœ€è¦ã€‚å¯†ç é‡ç½®ç«‹å³ç”Ÿæ•ˆï¼Œä½†å·²ç™»å½•çš„ä¼šè¯ä¼šä¿æŒæœ‰æ•ˆç›´åˆ° token è¿‡æœŸã€‚

---

### Q: å¯ä»¥åˆ›å»ºå¤šä¸ªç®¡ç†å‘˜å—ï¼Ÿ

A: å½“å‰ç‰ˆæœ¬åªæ”¯æŒå•ä¸ªç®¡ç†å‘˜è´¦æˆ·ã€‚æœªæ¥ç‰ˆæœ¬ä¼šæ”¯æŒå¤šç®¡ç†å‘˜å’Œæƒé™ç®¡ç†ã€‚

---

### Q: å¯†ç é‡ç½®å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. **ç”¨æˆ·åæ˜¯å¦æ­£ç¡®**
   ```bash
   ./panel -show-admin
   ```

2. **å¯†ç æ˜¯å¦ç¬¦åˆè¦æ±‚**
   - è‡³å°‘ 8 ä¸ªå­—ç¬¦
   - é¿å…ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦å¯¼è‡´çš„ shell è½¬ä¹‰é—®é¢˜

3. **æ•°æ®åº“æ˜¯å¦å¯è®¿é—®**
   - æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶è·¯å¾„
   - æ£€æŸ¥æ–‡ä»¶æƒé™

4. **ä½¿ç”¨å¼•å·åŒ…è£¹å¯†ç **ï¼ˆé¿å…ç‰¹æ®Šå­—ç¬¦é—®é¢˜ï¼‰
   ```bash
   ./panel -reset-password -username=admin_xxx -password="NewPassword123!"
   ```

---

### Q: å¦‚ä½•åœ¨ Windows ä¸Šä½¿ç”¨è¿™äº›å‘½ä»¤ï¼Ÿ

A: ä½¿ç”¨ PowerShell æˆ– CMDï¼š

```powershell
# PowerShell
.\panel.exe -show-admin
.\panel.exe -reset-password -username=admin_xxx -password="NewPassword123!"

# CMD
panel.exe -show-admin
panel.exe -reset-password -username=admin_xxx -password=NewPassword123!
```

**æ³¨æ„**: åœ¨ PowerShell ä¸­ï¼Œç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ `!`ï¼‰å¯èƒ½éœ€è¦è½¬ä¹‰æˆ–ä½¿ç”¨å¼•å·ã€‚

---

## æœ€ä½³å®è·µ

### 1. å®šæœŸæ›´æ¢å¯†ç 

å»ºè®®æ¯ 3-6 ä¸ªæœˆæ›´æ¢ä¸€æ¬¡ç®¡ç†å‘˜å¯†ç ï¼š

```bash
./panel -reset-password -username=admin_xxx -password="NewStrongPassword$(date +%Y%m)"
```

### 2. ä½¿ç”¨å¼ºå¯†ç 

**å¥½çš„å¯†ç **:
- `Xr@y#P4n3l$2024!Sec`
- `K9mL#2pQ@8rT6vN4xY`
- `MyP@ssw0rd!2024#Xray`

**ä¸å¥½çš„å¯†ç **:
- `admin123`
- `password`
- `12345678`

### 3. ä¿å­˜å‡­æ®

ä½¿ç”¨å¯†ç ç®¡ç†å™¨ä¿å­˜ç®¡ç†å‘˜å‡­æ®ï¼š
- 1Password
- Bitwarden
- KeePass
- LastPass

### 4. å¤‡ä»½æ•°æ®åº“

åœ¨é‡ç½®å¯†ç å‰å¤‡ä»½æ•°æ®åº“ï¼š

```bash
# å¤‡ä»½
cp /var/lib/xray-panel/panel.db /var/lib/xray-panel/panel.db.backup

# é‡ç½®å¯†ç 
./panel -reset-password -username=admin_xxx -password=NewPassword123!

# å¦‚æœå‡ºé—®é¢˜ï¼Œæ¢å¤å¤‡ä»½
cp /var/lib/xray-panel/panel.db.backup /var/lib/xray-panel/panel.db
```

---

## æ€»ç»“

- âœ… `-version` - æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
- âœ… `-show-admin` - æ˜¾ç¤ºç®¡ç†å‘˜è´¦æˆ·
- âœ… `-reset-password` - é‡ç½®ç®¡ç†å‘˜å¯†ç 
- âœ… `-config` - æŒ‡å®šé…ç½®æ–‡ä»¶
- âœ… æ‰€æœ‰å‘½ä»¤éƒ½æ”¯æŒ Windowsã€Linuxã€macOS
- âœ… å¯†ç é‡ç½®ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯
- âœ… æ”¯æŒæŸ¥çœ‹å¤šä¸ªç®¡ç†å‘˜è´¦æˆ·ï¼ˆæœªæ¥ç‰ˆæœ¬ï¼‰
